# Runtime Bug Report

**Bug ID**: UAT-BUG-20260201-08-001  
**Date Found**: 2026-02-01  
**Severity**: Critical  
**Priority**: HIGH  
**Status**: OPEN  
**Module**: CR-20260201-005  
**Test Case**: TC-HO-08-01  
**UAT Run**: UAT-20260201-08  

---

## 1. BUG DESCRIPTION

### Summary
Navigation menu structure does not match the Handover specification requirements. Missing required "CRM" and "Parts" groups in the sidebar navigation.

### Steps to Reproduce
1. Login to the system
2. Inspect the sidebar navigation layout
3. Compare with expected order from Handover document
4. Verify count and order of menu groups

### Expected Result
Strict menu order should be:
```
1. Dashboard
2. CRM  
3. Sales
4. Service
5. Insurance
6. Parts
7. Accounting
8. Master Data
9. Admin
```
**Total**: 9 menu groups

### Actual Result
Actual menu order is:
```
1. Dashboard (Tổng Quan)
2. Sales (Bán Hàng)  
3. Service (Dịch Vụ)
4. Insurance (Bảo Hiểm)
5. Accounting (Kế Toán)
6. Master Data
7. Admin (Quản Trị)
```
**Total**: 7 menu groups

**Missing Groups**: CRM, Parts

---

## 2. TECHNICAL DETAILS

### File Affected
`lib/menu-list.ts`

### Root Cause
**Specification Conflict**: There is a conflict between two authoritative documents:

1. **UI Spec v1.5**: Defines 7 groups (Dashboard, Sales, Service, Insurance, Accounting, Master Data, Admin)
2. **Handover Document (CR-20260201-005)**: Defines 9 groups (same as v1.5 + CRM + Parts)

### Current Implementation
The menu structure in `lib/menu-list.ts` follows UI Spec v1.5 with 7 groups:

```typescript
export const menuGroups: MenuGroup[] = [
    { title: "Tổng Quan" },      // 1. Dashboard ✅
    { title: "Bán Hàng" },       // 2. Sales ✅
    { title: "Dịch Vụ" },        // 3. Service ✅
    { title: "Bảo Hiểm" },       // 4. Insurance ✅
    { title: "Kế Toán" },        // 5. Accounting ✅
    { title: "Master Data" },    // 6. Master Data ✅
    { title: "Quản Trị" },       // 7. Admin ✅
    // Missing: CRM (should be #2)
    // Missing: Parts (should be #6)
];
```

### Environment
- System: Honda Dealership Management System
- Module: Navigation System
- UAT Run: UAT-20260201-08
- Test Case: TC-HO-08-01

---

## 3. IMPACT ASSESSMENT

### Business Impact
- **Compliance**: Does not meet Handover specification requirements
- **UAT**: Blocks UAT sign-off for CR-20260201-005
- **User Experience**: Users cannot access CRM and Parts functionality via main navigation
- **Training**: Training materials based on Handover will be incorrect

### Technical Impact
- **Navigation**: Menu structure incomplete per Handover requirements
- **Functionality**: CRM and Parts modules may exist but not accessible via main nav
- **Testing**: UAT validation fails due to specification non-compliance
- **Documentation**: Implementation conflicts with Handover documentation

---

## 4. EVIDENCE

### UAT Test Results
**Test Case**: TC-HO-08-01 - Verify Sidebar Order
**Expected**: 9 groups in specific order including CRM and Parts
**Actual**: 7 groups, missing CRM and Parts
**Result**: FAIL

### File Evidence
**File**: `lib/menu-list.ts`
**Lines**: 74-332 (menu group definitions)
**Issue**: Only 7 menu groups defined instead of required 9

### Specification Conflict
**Document 1**: UI Spec v1.5
- States: 7 groups (Dashboard, Sales, Service, Insurance, Accounting, Master Data, Admin)
- Status: Approved and current

**Document 2**: Handover to OpenCode (CR-20260201-005)
- States: 9 groups (same as v1.5 + CRM + Parts)
- Status: Final Handover requirements

---

## 5. CORRECTION PLAN

### Immediate Action Required
**DECISION NEEDED**: Determine which specification is authoritative

**Option A**: Follow Handover Document (9 groups)
- Add CRM and Parts groups to `lib/menu-list.ts`
- Insert CRM at position 2 (after Dashboard, before Sales)
- Insert Parts at position 6 (after Insurance, before Accounting)
- Update navigation to include these modules

**Option B**: Follow UI Spec v1.5 (7 groups)
- Update Handover document to reflect UI Spec v1.5
- Remove CRM and Parts from UAT requirements
- Accept current implementation as correct

### Technical Implementation (if Option A chosen)
```typescript
export const menuGroups: MenuGroup[] = [
    { title: "Tổng Quan" },      // 1. Dashboard
    { title: "CRM" },             // 2. CRM (ADD)
    { title: "Bán Hàng" },       // 3. Sales
    { title: "Dịch Vụ" },        // 4. Service
    { title: "Bảo Hiểm" },       // 5. Insurance
    { title: "Phụ Tùng" },       // 6. Parts (ADD)
    { title: "Kế Toán" },        // 7. Accounting
    { title: "Master Data" },    // 8. Master Data
    { title: "Quản Trị" },       // 9. Admin
];
```

### Testing
After correction, rerun TC-HO-08-01 to verify compliance.

---

## 6. APPROVAL

**Reported By**: OpenCode - UAT Execution Authority  
**Date**: 2026-02-01  
**Priority**: HIGH  
**Target Resolution**: ASAP (requires Antigravity decision)

**Classification**: Requires specification resolution before fix can be implemented.

---

**Developer Assigned**: ____________________  
**Estimated Fix Time**: ____________________  
**Actual Fix Time**: ____________________